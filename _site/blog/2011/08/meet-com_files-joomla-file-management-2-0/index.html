<!DOCTYPE html>
<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width" />
    <title>Meet com_files, Joomla file management 2.0</title>
    <meta name="description" content="Open Source PHP Framework for Web Applications. A project for developers integrators and hackers alike. Through collaboration we innovate and grow Nooku." />

    <link rel="shortcut icon" type="image/ico" href="/assets/img/favicon.ico" />
    <link href="/assets/css/prism.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,400,300,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/style.css">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-214238-5', 'nooku.org');
        ga('send', 'pageview');

    </script>
</head>
<body>

<div id="wrapper">
    <div class="section header">
        <div class="container container-centered">
            <div class="row">
                <div class="brand col-sm-5">
                    <a href="/"><img src="/assets/img/logo.jpg" height="60px" width="123px" /></a>
                </div>
                <div class="col-sm-7">
                    <div class="navbar" role="navigation">
                        <div class="container-fluid">
                            <ul class="nav navbar-nav">
                                
                                
                                
                                <li class="" role="menuitem">
                                    <a href="/">About</a>
                                </li>
                                
                                
                                
                                <li class="" role="menuitem">
                                    <a href="/manifesto">Manifesto</a>
                                </li>
                                
                                
                                
                                <li class="active" role="menuitem">
                                    <a href="/blog">Blog</a>
                                </li>
                                
                                
                                
                                <li class="" role="menuitem">
                                    <a href="/events">Events</a>
                                </li>
                                
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="section blog">
        <div class="container">
            <div class="row">
                <div class="col-sm-9">
                    <article>
                        <header>
                            <h1>
                                Meet com_files, Joomla file management 2.0
                            </h1>
                            <h3 class="text-muted">
                                12 August 2011 by ercan
                            </h3>
                        </header>
          
                        <p>The Joomla Media Manager is currently a hermetically sealed black box which has been around since the Mambo days. It neither allows extending it, nor can it be easily re-used by developers. Over the past few weeks we have been giving it some much needed love and re-build it from the ground up. Meet : com_files !</p>

<p>For the diehards, in Joomla this component is called com_media. We gave it a new name to better reflect its use and to allow you to also install it in Joomla site. In good Nooku tradition com_files is fully re-usable and extend-able.</p>

<p><a href="http://www.flickr.com/photos/nooku/5859545823/" title="Nooku Server - Files by Nooku, on Flickr"><img src="http://farm6.static.flickr.com/5106/5859545823_0c90031377.jpg" alt="Nooku Server - Files" width="500" height="227" /></a></p>

<p>If you check out our <a href="http://demo.nooku.org/administrator/index.php?option=com_files&amp;view=files#/">Nooku Server demo</a> you will notice that the user interface looks very similar to that of Joomla. Don’t let yourself be fooled by the looks. Under the hood this baby has a completely new and shiny engine.</p>

<p>In this blog I’ll walk you over the key points of the refactor and at the end I’ll show you how you can easily integrate this component in your own solutions.</p>

<!--more-->

<h3 id="ajaxified-for-extendibility">AJAXified for extendibility</h3>

<p>Joomla’s com_media is using iframes and server side rendered HTML. This works but doesn’t give a great amount of flexibility and extendibility.</p>

<p>So we put Mootools to good work and AJAXified it. File listings, thumbnail generation (more about this in a bit), deletes, uploads, … are now all done via AJAX.</p>

<p>These changes not only make the code very flexible and extendible they also make the user experience a lot more snappy, did we say a lot lot more!</p>

<h3 id="restful-out-of-the-box">RESTful out of the box</h3>

<p>Nooku Framework implements a <a href="http://martinfowler.com/articles/richardsonMaturityModel.html#level2">ROA (Resource Oriented Architecture) of level 2</a>. Every component build on Nooku Framework is auto-magically ROA level 2 and so is com_files! In fact, com_files UI is an AJAX client that consumes this REST service.</p>

<p>By exposing a REST API we allow developers to integrate the desktop and the web. For example, you could write a mobile app that would immediately upload the pictures you take with your camera to your site.<em>**</em></p>

<h3 id="html5-support-built-in">HTML5 support built in</h3>

<p>Thanks to the folks at <a href="http://www.plupload.com/">http://www.plupload.com</a> we now have a multi file uploader that supports all HTML5 file upload features of your browser of choice (even in mobile). You can select multiple files, rename them as you wish, hit upload and be done.</p>

<p>You (or your customers) still don’t have a modern browser? Flash is also supported as a fallback for those stuck in 2010. So you still get AJAX multi-uploads. Need to upload 30 images at once, no problem we have it covered.</p>

<h3 id="speedy-thumbnails">Speedy thumbnails</h3>

<p>When you have hundreds of images in a folder, com_media loads all of them one by one. Resulting in your CPU fans going crazy and pages loading slow. We solved this by paginating results just like any other component and we also created a thumbnail cache using <a href="http://en.wikipedia.org/wiki/Data_URI_scheme">Data URI</a>’s.</p>

<p>When you navigate to a folder, a subsequent AJAX request will be issued to fetch all thumbnails on the current page. This means you will get all your thumbnails in one HTTP request which gives a great speed boost. Combined with the view cache that is coming in Nooku Framework Alpha 4 file browsing will be super fast! Did we say, super super fast!<br />
<em>**</em></p>

<h3 id="re-use-and-remix">Re-use and remix</h3>

<p>In Joomla the com_media manager is tied to a single folder and the code is not re-usable. As a result a lot of Joomla extensions have their own build in upload and file management code. We like to keep our code DRY !</p>

<p>Our Nooku files component solves all that! It’s not tied to a single folder anymore, instead it implements ‘containers’. Containers can be linked to the local file system, and in future also to cloud file systems (S3, Dropbox, … )</p>

<p>To add your own custom container all you need to do is:</p>

<pre class="brush: php; toolbar: false;">KFactory::tmp('admin::com.files.controller.container')-&gt;add(array(
'id' =&gt; 'com_mycomponent.myview', /*unique container id*/
'path' =&gt; 'pathtomyfiles' /*folder starting from the site root*/
));</pre>

<p>To create your own instance of com_files and displaying it is as simple as making one HMVC call:</p>

<pre class="brush: php; toolbar: false;">&lt;?= KFactory::tmp('admin::com.files.controller.file')
-&gt;container('com_mycomponent.myview')
-&gt;types(array('file', 'image')) /*optional*/
-&gt;layout('default') /*compact for modal view*/
-&gt;display(); ?&gt;</pre>

<p>The AJAX implementation is fully customizable and exposes numerous JavaScript events for you to hook to customize the workflow. For example to catch folder navigations you can hook into afterNavigate event of the application.</p>

<pre class="brush: js; toolbar: false;">&lt;script&gt;
window.addEvent('domready', function() {
/* Files.app is the current running instance
* It holds the references to all components
*/
Files.app.addEvent('afterNavigate', function(path) {
alert('You just navigated to '+path);
});
})</pre>

<p>These are just a few simple code examples to show you the immense power of this component and how to leverage it. Time to dive in yourself!</p>

<h3 id="show-me-the-code">Show me the code</h3>

<p>The com_files component can be found in our<a href="https://nooku.assembla.com/spaces/nooku-components"> Nooku Components space</a>. Give it a spin and let us know how you like it!</p>

<p>Happy coding !</p>


                    
                        <hr>
                        <section>
                            <div id="disqus_thread"></div>
                            <script type="text/javascript">
                                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                                var disqus_shortname = 'nooku'; // required: replace example with your forum shortname
                                var disqus_identifier = '383902704';
                                var disqus_url = 'http://blog.nooku.org/blog/2011/08/meet-com_files-joomla-file-management-2-0/';

                                /* * * DON'T EDIT BELOW THIS LINE * * */
                                (function() {
                                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                                })();
                            </script>
                            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                        </section>
                    </article>
                </div>
                <div class="col-sm-3">
                    <ul>
                        
                            
                            
                            
                                <li><a href="/blog/2014/07">July 2014</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2014/06">June 2014</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2013/03">March 2013</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2012/09">September 2012</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2012/06">June 2012</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2012/05">May 2012</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2012/04">April 2012</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2012/03">March 2012</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2012/01">January 2012</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/12">December 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/11">November 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/10">October 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/09">September 2011</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/08">August 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/07">July 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/05">May 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/04">April 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/03">March 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/02">February 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2011/01">January 2011</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/12">December 2010</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/11">November 2010</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/10">October 2010</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/09">September 2010</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/08">August 2010</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/07">July 2010</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/06">June 2010</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/05">May 2010</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/04">April 2010</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2010/03">March 2010</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2009/11">November 2009</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2009/09">September 2009</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2009/08">August 2009</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2009/07">July 2009</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2009/06">June 2009</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2009/05">May 2009</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2009/04">April 2009</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2009/03">March 2009</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2008/11">November 2008</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2008/09">September 2008</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2008/08">August 2008</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2008/06">June 2008</a></li>
                                 
                            
                        
                            
                            
                            
                                <li><a href="/blog/2008/05">May 2008</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                                <li><a href="/blog/2008/04">April 2008</a></li>
                                 
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                            
                            
                            
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>

<div class="section footer">
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <p>
                    <a href="http://www.facebook.com/nooku.org">Facebook</a> |
                    <a href="http://www.twitter.com/nooku">Twitter</a> |
                    <a href="http://www.github.com/nooku">Github</a> |
                    <a href="/blog/rss.xml">RSS</a>
                </p>
            </div>
            <div class="copyright col-sm-6">
                <p>Copyright 2014 <a href="http://www.timble.net">Timble</a></p>
            </div>
        </div>
    </div>
</div>
</div>
<script src="/assets/js/prism.js"></script>
</body>
</html>